{% extends "admin/base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è | Mastodontco Admin{% endblock %}

{% block content %}
<div class="space-y-6">
    <h1 class="text-2xl font-semibold text-gray-800">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-700">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                    <span class="text-blue-600">üë§</span>
                </div>
            </div>
            <p class="text-3xl font-bold mt-4">{{ stats.users_count }}</p>
            <div class="flex justify-between mt-1">
                <p class="text-sm text-gray-500">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</p>
                <p class="text-sm font-medium text-green-600">+{{ stats.users_growth }}%</p>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –û–±—ä–µ–∫—Ç—ã -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-700">–û–±—ä–µ–∫—Ç—ã</h3>
                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                    <span class="text-green-600">üèóÔ∏è</span>
                </div>
            </div>
            <p class="text-3xl font-bold mt-4">{{ stats.objects_count }}</p>
            <div class="flex justify-between mt-1">
                <p class="text-sm text-gray-500">–ê–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤</p>
                <p class="text-sm font-medium text-green-600">+{{ stats.objects_growth }}%</p>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –§–æ—Ç–æ–æ—Ç—á–µ—Ç—ã -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-700">–§–æ—Ç–æ–æ—Ç—á–µ—Ç—ã</h3>
                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                    <span class="text-purple-600">üì∏</span>
                </div>
            </div>
            <p class="text-3xl font-bold mt-4">{{ stats.reports_count }}</p>
            <div class="flex justify-between mt-1">
                <p class="text-sm text-gray-500">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π</p>
                <p class="text-sm font-medium text-green-600">+{{ stats.reports_growth }}%</p>
            </div>
        </div>
        
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <div class="flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-700">–°–æ–æ–±—â–µ–Ω–∏—è</h3>
                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                    <span class="text-yellow-600">üí¨</span>
                </div>
            </div>
            <p class="text-3xl font-bold mt-4">{{ stats.messages_count }}</p>
            <div class="flex justify-between mt-1">
                <p class="text-sm text-gray-500">–ß–∞—Ç —Å–µ–≥–æ–¥–Ω—è</p>
                <p class="text-sm font-medium {{ 'text-green-600' if stats.messages_growth >= 0 else 'text-red-600' }}">
                    {{ '+' if stats.messages_growth >= 0 else '' }}{{ stats.messages_growth }}%
                </p>
            </div>
        </div>
    </div>
    
    <!-- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
        <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <h3 class="text-lg font-medium text-gray-700 mb-4">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ</h3>
            <div class="h-64 bg-gray-50 rounded flex items-center justify-center border border-gray-200">
                <p class="text-gray-400 text-sm">–ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Chart.js -->
            </div>
            <div class="flex justify-between mt-4 text-xs text-gray-500">
                <div>–ü–Ω</div>
                <div>–í—Ç</div>
                <div>–°—Ä</div>
                <div>–ß—Ç</div>
                <div>–ü—Ç</div>
                <div>–°–±</div>
                <div>–í—Å</div>
            </div>
        </div>

        <!-- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-700">–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <button class="text-sm text-blue-500 hover:text-blue-700">–í—Å–µ</button>
            </div>
            
            <div class="space-y-4">
                {% for user in new_users %}
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gray-200 rounded-full overflow-hidden mr-3">
                        {% if user.avatar %}
                            <img src="{{ user.avatar }}" alt="{{ user.name }}" class="w-full h-full object-cover">
                        {% else %}
                            <div class="w-full h-full flex items-center justify-center bg-blue-500 text-white">
                                {{ user.initials }}
                            </div>
                        {% endif %}
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-800">{{ user.name }}</p>
                        <p class="text-xs text-gray-500">{{ user.role }}</p>
                    </div>
                    <span class="ml-auto text-xs text-gray-400">{{ user.joined }}</span>
                </div>
                {% else %}
                <div class="text-center text-gray-500 text-sm py-4">
                    –ù–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-medium text-gray-700">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <button class="text-sm text-blue-500 hover:text-blue-700">–ò—Å—Ç–æ—Ä–∏—è</button>
        </div>
        
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead>
                    <tr>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">–î–µ–π—Å—Ç–≤–∏–µ</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">–û–±—ä–µ–∫—Ç</th>
                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 tracking-wider">–í—Ä–µ–º—è</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    {% for action in recent_actions %}
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-gray-200 rounded-full mr-3 flex-shrink-0">
                                    {% if action.user.avatar %}
                                        <img src="{{ action.user.avatar }}" alt="{{ action.user.name }}" class="w-full h-full rounded-full">
                                    {% endif %}
                                </div>
                                <div class="text-sm font-medium text-gray-700">{{ action.user.name }}</div>
                            </div>
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap">
                            <span class="text-sm text-gray-700">{{ action.description }}</span>
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap">
                            <span class="text-sm text-gray-700">{{ action.object }}</span>
                        </td>
                        <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">
                            {{ action.time }}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="px-4 py-6 text-center text-sm text-gray-500">
                            –ù–µ—Ç –Ω–µ–¥–∞–≤–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<!-- –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏
    console.log('Dashboard loaded');
</script>
{% endblock %}